<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="How to Install Chamilo on Ubuntu Server" />
<meta name="author" content="darryl gibbs" />
<meta property="og:locale" content="en" />
<meta name="description" content="This is a tutorial I’ve written mostly for my own purposes that I have adapted from the orginal post from Vultr. Kudos to those guys. Prerequisites Fresh Ubuntu Server install on a VPS with sudo access. A domain pointed at the server. Install necessary (and extra) software First, update the system. 1 sudo apt upgrade -y &amp;&amp; sudo apt dist-upgrade -y &amp;&amp; sudo apt autoremove -y &amp;&amp; sudo apt clean -y &amp;&amp; sudo reboot Then, install software we will use for the server. 1 2 3 4 5 6 7 8 9 10 sudo apt install -y ufw \ fail2ban \ unzip \ zip \ git \ tree \ openssh-server \ net-tools \ curl \ software-properties-common Update UFW firewall rules 1 2 3 4 sudo ufw allow in ssh &amp;&amp; \ sudo ufw allow in http &amp;&amp; \ sudo ufw allow in https &amp;&amp; \ sudo ufw enable Install, setup and secure MariaDB To install the latest version of MariaDB directly, you will need to add the MariaDB repos. Confirm the latest version here, and update the version number and Ubuntu version as needed. 1 2 3 4 5 sudo apt install -y software-properties-common &amp;&amp; \ sudo apt-key adv --recv-keys --keyserver hkp://keyserver.ubuntu.com:80 0xF1656F24C74CD1D8 &amp;&amp; \ sudo add-apt-repository &#39;deb [arch=amd64,arm64,ppc64el] http://mirrors.accretive-networks.net/mariadb/repo/10.5/ubuntu focal main&#39; &amp;&amp; \ sudo apt update &amp;&amp; \ sudo apt install -y mariadb-server During the install, provide a strong password for MariaDB. If not requested, no sweat, we’ll secure it in the next block. Ok, now fire up MariaDB and also make it start up automatically with the system on reboot: 1 2 sudo systemctl start mariadb.service sudo systemctl enable mariadb.service Now, let’s secure MariaDB: 1 sudo /usr/bin/mysql_secure_installation A prompt will come up, answer as below, but remember to provide a strong root password now if not done so previously. 1 2 3 4 5 6 Enter current password for root (enter for none): strong-ass-MariaDB-root-password Change the root password? [Y/n]: n Remove anonymous users? [Y/n]: y Disallow root login remotely? [Y/n]: y Remove test database and access to it? [Y/n]: y Reload privilege tables now? [Y/n]: y Install Apache 1 sudo apt install -y apache2 Go to the server URL to confirm Apache is up and running. Remove the standard Apache welcome page. 1 sudo mv /var/www/html/index.html /var/www/html/index.html.old Backup the default .conf file and block Apache from exposing the web root directory: 1 2 sudo cp /etc/apache2/apache2.conf /etc/apache2/apache2.conf.bak sudo sed -i &quot;s/Options Indexes FollowSymLinks/Options FollowSymLinks/&quot; /etc/apache2/apache2.conf Enable the Apache rewrite module, start the service and auto-start 1 2 3 sudo a2enmod rewrite sudo systemctl start apache2.service sudo systemctl enable apache2.service Install latest PHP Packages In order to run the latest PHP 7.x packages, we need to add the repo: 1 2 3 4 sudo add-apt-repository -y ppa:ondrej/php sudo apt update sudo apt upgrade -y sudo apt autoremove -y Install the latest 7.4 packages. Before doing so, confirm the latest version here, and if higher the 7.4, substitute that version wherever you see 7.4. 1 sudo apt install -y php7.4 php7.4-opcache php7.4-cli php7.4-curl php7.4-common php7.4-gd php7.4-intl php7.4-mbstring php7.4-mysql libapache2-mod-php7.4 php7.4-soap php7.4-xml php7.4-xmlrpc php7.4-zip php7.4-ldap php-apcu-bc Backup and then edit the PHP config file pertaining to Apache: 1 2 sudo cp /etc/php/7.4/apache2/php.ini /etc/php/7.4/apache2/php.ini.bak sudo sed -i &#39;s#;date.timezone =#date.timezone = America/Sao_Paulo#&#39; /etc/php/7.4/apache2/php.ini Right, now let’s adjust the php.ini file to meet the necessities of Chamilo LMS: 1 sudo nano /etc/php/7.4/apache2/php.ini Find these: 1 2 3 session.cookie_httponly = upload_max_filesize = 2M post_max_size = 8M And update them to look like these: 1 2 3 session.cookie_httponly = 1 upload_max_filesize = 100M post_max_size = 100M Install Chamilo Setup the Database 1 2 3 4 5 6 7 sudo mysql -u root -p CREATE DATABASE chamilo; CREATE USER &#39;chamilo&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL PRIVILEGES ON chamilo.* TO &#39;chamilo&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39; WITH GRANT OPTION; FLUSH PRIVILEGES; EXIT; Make sure to update at least the password with your prefered choice, and the DB name and user should you wish to. Get Chamilo files Let’s now head to Chamilo’s GitHub page to confirm we have the latest version. Update the link and steps below as needed: 1 2 cd wget https://github.com/chamilo/chamilo-lms/releases/download/v1.11.14/chamilo-1.11.14.tar.gz Extract all the files to the /opt directory: 1 sudo tar -zxvf chamilo-1.11.14.tar.gz -C /opt Create a symbolic link between the unzip directory and the webserver root directory” 1 sudo ln -s /opt/chamilo-lms-1.11.14 /var/www/html/chamilo Modify the ownership of all Chamilo files to the www-data user and the www-data group: 1 sudo chown -R www-data:www-data /opt/chamilo-lms-1.11.14 Configure Apache virtual server for Chamilo 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 cat &lt;&lt;EOF | sudo tee /etc/apache2/sites-available/chamilo.conf &lt;VirtualHost *:80&gt; ServerAdmin admin@example.com DocumentRoot /var/www/html/chamilo ServerName chamilo.example.com ServerAlias example.com &lt;Directory /&gt; AllowOverride All Require all granted &lt;/Directory&gt; &lt;Directory /var/www/html/chamilo&gt; Options FollowSymLinks AllowOverride All Require all granted &lt;/Directory&gt; ErrorLog /var/log/apache2/chamilo.example.com-error_log CustomLog /var/log/apache2/chamilo.example.com-access_log common &lt;/VirtualHost&gt; EOF Update the ServerAdmin, ServerName, ServerAlias, ErrorLog and CustomLog as necessary. Then, create the symbolic links to the /etc/apache2/sites-enabled directory, while deleting the Apache default link. 1 2 sudo rm /etc/apache2/sites-enabled/000-default.conf sudo ln -s /etc/apache2/sites-available/chamilo.conf /etc/apache2/sites-enabled/ Finally, restart Apache so all the changes are activated. 1 sudo systemctl restart apache2.service Complete the install in the browser Open up your browser and navigate to your server, for example: http://chamilo.iamamazing.com, and click on Install Chamilo. From here on, fill out the details as requested, but here is a quick guide for you. Step 1 - Installation Language: Choose the language of choice and then click the Next button. Step 2 – Requirements: Make sure that all mandatory requirements have been met, and then click the New installation button. Step 3 – Licence: Read the licence if you dare, and the click the checkbox next to the I agree sentence, fill in all required fields, and then click the Next button. Step 4 – MySQL database settings: Input the database credentials we setup earlier and then click the Check database connection button to verify them. Click the Next button to move on. Step 5 – Config settings: Modify the pre-set administrator password, fill in the other fields accordingly, and then click the Next button. Step 6 – Last check before install: Review all of the settings and hit the Install Chamilo button to start the web installation. Step 7 – Installation process execution: When Chamilo is successfully installed, click the Go to your newly created portal. button to finish the web installation wizard. Post-Install Safety Measure: DO NOT SKIP THIS!!! In order to tighten security of the installation folders, we need to change their permissions: 1 2 sudo chmod -R 0555 /var/www/html/chamilo/app/config sudo rm -rf /var/www/html/chamilo/main/install Fail2Ban Sourced from: How to Secure Your Linux Server with fail2banHow to Secure Your Linux Server with fail2ban Firstly, install fail2ban. 1 sudo apt-get install fail2ban Configuring fail2ban fail2ban creates ‘jails’ in .conf files. This standard config is removed each time fail2ban upgrades, so we’ll make a customized file. So, lets make a copy of the default file and then edit our own version. 1 2 sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local sudo nano /etc/fail2ban/jail.local Scroll down to the [DEFAULT] and [sshd] sections, that come up from about line 90 onwards. It appears near the top too, but ignore that. Find the following lines and update as below. See the source link above for further details of each. [DEFAULT] section: 1 2 3 4 5 6 7 ignoreip = 127.0.0.1/8 ::1 bantime = 24h findtime = 5m maxretry = 3 [sshd] section: ADD these 2 lines to the end of the [sshd] section. 1 2 maxretry = 3 enable = true Enable fail2ban Enable the service and auto-start. sudo systemctl enable fail2ban sudo systemctl start fail2ban Check that fail2ban is working. 1 sudo systemctl status fail2ban.service Check fail2ban status. This should show the active jail. 1 sudo fail2ban-client status To show the exact status of the jail we activated. It will show any IPs that are banned. 1 sudo fail2ban-client status sshd Testing the jail: see source link above. Unbanning an IP After seeing the banned IP from above, use the command below, inserting the appropriate IP. 1 sudo fail2ban-client set sshd unbanip 192.168.4.25 Now it can try again. Let’s Encrypt Certificate This part is adapted from a Digital Ocean tutorial. Certbot setup SSL certs are a must have so let’s hook them up. Firstly, install the certbot. sudo apt install -y certbot python3-certbot-apache Confirm your ServerName and ServerAlias details in your chamilo.conf file as we will need these for the cert request. 1 sudo nano /etc/apache2/sites-available/chamilo.conf Let’s quickly recheck that our Apahce files are all good and then reload Apache incase we made changes. 1 2 sudo apache2ctl configtest sudo systemctl reload apache2 Allow HTTPS through the firewall Confirm the current status. 1 sudo ufw status If HTTP and HTTPS aren’t allowed through, please refer back to the UFW setup above. Obtain SSL Certificate 1 sudo certbot --apache A script will start to configure SSL. You will be asked to give an email, and you must in order to receive notices of expiring certs. When asked, agree to Let’s Encrypt’s TOS, by pressing A. Certbot will then ask you which domains you want to get certs for. This is where having accurate ServerName and ServerAlias details is important. When asked whether you want to redirect traffic, chose option 2 for YES. This will force all conenctions over HTTPS. 1 2 3 4 5 6 7 8 Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 1: No redirect - Make no further changes to the webserver configuration. 2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for new sites, or if you&#39;re confident your site works on HTTPS. You can undo this change by editing your web server&#39;s configuration. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Select the appropriate number [1-2] then [enter] (press &#39;c&#39; to cancel): 2 If you get the message below, you’re golden! 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Congratulations! You have successfully enabled https://your_domain and https://www.your_domain You should test your configuration at: https://www.ssllabs.com/ssltest/analyze.html?d=your_domain https://www.ssllabs.com/ssltest/analyze.html?d=www.your_domain - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - IMPORTANT NOTES: - Congratulations! Your certificate and chain have been saved at: /etc/letsencrypt/live/your_domain/fullchain.pem Your key file has been saved at: /etc/letsencrypt/live/your_domain/privkey.pem Your cert will expire on 2020-07-27. To obtain a new or tweaked version of this certificate in the future, simply run certbot again with the &quot;certonly&quot; option. To non-interactively renew *all* of your certificates, run &quot;certbot renew&quot; - Your account credentials have been saved in your Certbot configuration directory at /etc/letsencrypt. You should make a secure backup of this folder now. This configuration directory will also contain certificates and private keys obtained by Certbot so making regular backups of this folder is ideal. - If you like Certbot, please consider supporting our work by: Donating to ISRG / Let&#39;s Encrypt: https://letsencrypt.org/donate Donating to EFF: https://eff.org/donate-le You can confirm your SSL cert and it’s grade over at SSL Labs Server Test. Verify Certbot Auto-Renewal Our certbot package will automatically auto-renew our certificate. To check the status of this service, let’s use: 1 sudo systemctl status certbot.timer Your output should look like this. 1 2 3 4 5 6 7 8 Output ● certbot.timer - Run certbot twice daily Loaded: loaded (/lib/systemd/system/certbot.timer; enabled; vendor preset: enabled) Active: active (waiting) since Tue 2020-04-28 17:57:48 UTC; 17h ago Trigger: Wed 2020-04-29 23:50:31 UTC; 12h left Triggers: ● certbot.service Apr 28 17:57:48 fine-turtle systemd[1]: Started Run certbot twice daily. And if you want to test the renewal process, run this. 1 sudo certbot renew --dry-run Conclusion That’s it! All should be working now." />
<meta property="og:description" content="This is a tutorial I’ve written mostly for my own purposes that I have adapted from the orginal post from Vultr. Kudos to those guys. Prerequisites Fresh Ubuntu Server install on a VPS with sudo access. A domain pointed at the server. Install necessary (and extra) software First, update the system. 1 sudo apt upgrade -y &amp;&amp; sudo apt dist-upgrade -y &amp;&amp; sudo apt autoremove -y &amp;&amp; sudo apt clean -y &amp;&amp; sudo reboot Then, install software we will use for the server. 1 2 3 4 5 6 7 8 9 10 sudo apt install -y ufw \ fail2ban \ unzip \ zip \ git \ tree \ openssh-server \ net-tools \ curl \ software-properties-common Update UFW firewall rules 1 2 3 4 sudo ufw allow in ssh &amp;&amp; \ sudo ufw allow in http &amp;&amp; \ sudo ufw allow in https &amp;&amp; \ sudo ufw enable Install, setup and secure MariaDB To install the latest version of MariaDB directly, you will need to add the MariaDB repos. Confirm the latest version here, and update the version number and Ubuntu version as needed. 1 2 3 4 5 sudo apt install -y software-properties-common &amp;&amp; \ sudo apt-key adv --recv-keys --keyserver hkp://keyserver.ubuntu.com:80 0xF1656F24C74CD1D8 &amp;&amp; \ sudo add-apt-repository &#39;deb [arch=amd64,arm64,ppc64el] http://mirrors.accretive-networks.net/mariadb/repo/10.5/ubuntu focal main&#39; &amp;&amp; \ sudo apt update &amp;&amp; \ sudo apt install -y mariadb-server During the install, provide a strong password for MariaDB. If not requested, no sweat, we’ll secure it in the next block. Ok, now fire up MariaDB and also make it start up automatically with the system on reboot: 1 2 sudo systemctl start mariadb.service sudo systemctl enable mariadb.service Now, let’s secure MariaDB: 1 sudo /usr/bin/mysql_secure_installation A prompt will come up, answer as below, but remember to provide a strong root password now if not done so previously. 1 2 3 4 5 6 Enter current password for root (enter for none): strong-ass-MariaDB-root-password Change the root password? [Y/n]: n Remove anonymous users? [Y/n]: y Disallow root login remotely? [Y/n]: y Remove test database and access to it? [Y/n]: y Reload privilege tables now? [Y/n]: y Install Apache 1 sudo apt install -y apache2 Go to the server URL to confirm Apache is up and running. Remove the standard Apache welcome page. 1 sudo mv /var/www/html/index.html /var/www/html/index.html.old Backup the default .conf file and block Apache from exposing the web root directory: 1 2 sudo cp /etc/apache2/apache2.conf /etc/apache2/apache2.conf.bak sudo sed -i &quot;s/Options Indexes FollowSymLinks/Options FollowSymLinks/&quot; /etc/apache2/apache2.conf Enable the Apache rewrite module, start the service and auto-start 1 2 3 sudo a2enmod rewrite sudo systemctl start apache2.service sudo systemctl enable apache2.service Install latest PHP Packages In order to run the latest PHP 7.x packages, we need to add the repo: 1 2 3 4 sudo add-apt-repository -y ppa:ondrej/php sudo apt update sudo apt upgrade -y sudo apt autoremove -y Install the latest 7.4 packages. Before doing so, confirm the latest version here, and if higher the 7.4, substitute that version wherever you see 7.4. 1 sudo apt install -y php7.4 php7.4-opcache php7.4-cli php7.4-curl php7.4-common php7.4-gd php7.4-intl php7.4-mbstring php7.4-mysql libapache2-mod-php7.4 php7.4-soap php7.4-xml php7.4-xmlrpc php7.4-zip php7.4-ldap php-apcu-bc Backup and then edit the PHP config file pertaining to Apache: 1 2 sudo cp /etc/php/7.4/apache2/php.ini /etc/php/7.4/apache2/php.ini.bak sudo sed -i &#39;s#;date.timezone =#date.timezone = America/Sao_Paulo#&#39; /etc/php/7.4/apache2/php.ini Right, now let’s adjust the php.ini file to meet the necessities of Chamilo LMS: 1 sudo nano /etc/php/7.4/apache2/php.ini Find these: 1 2 3 session.cookie_httponly = upload_max_filesize = 2M post_max_size = 8M And update them to look like these: 1 2 3 session.cookie_httponly = 1 upload_max_filesize = 100M post_max_size = 100M Install Chamilo Setup the Database 1 2 3 4 5 6 7 sudo mysql -u root -p CREATE DATABASE chamilo; CREATE USER &#39;chamilo&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL PRIVILEGES ON chamilo.* TO &#39;chamilo&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39; WITH GRANT OPTION; FLUSH PRIVILEGES; EXIT; Make sure to update at least the password with your prefered choice, and the DB name and user should you wish to. Get Chamilo files Let’s now head to Chamilo’s GitHub page to confirm we have the latest version. Update the link and steps below as needed: 1 2 cd wget https://github.com/chamilo/chamilo-lms/releases/download/v1.11.14/chamilo-1.11.14.tar.gz Extract all the files to the /opt directory: 1 sudo tar -zxvf chamilo-1.11.14.tar.gz -C /opt Create a symbolic link between the unzip directory and the webserver root directory” 1 sudo ln -s /opt/chamilo-lms-1.11.14 /var/www/html/chamilo Modify the ownership of all Chamilo files to the www-data user and the www-data group: 1 sudo chown -R www-data:www-data /opt/chamilo-lms-1.11.14 Configure Apache virtual server for Chamilo 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 cat &lt;&lt;EOF | sudo tee /etc/apache2/sites-available/chamilo.conf &lt;VirtualHost *:80&gt; ServerAdmin admin@example.com DocumentRoot /var/www/html/chamilo ServerName chamilo.example.com ServerAlias example.com &lt;Directory /&gt; AllowOverride All Require all granted &lt;/Directory&gt; &lt;Directory /var/www/html/chamilo&gt; Options FollowSymLinks AllowOverride All Require all granted &lt;/Directory&gt; ErrorLog /var/log/apache2/chamilo.example.com-error_log CustomLog /var/log/apache2/chamilo.example.com-access_log common &lt;/VirtualHost&gt; EOF Update the ServerAdmin, ServerName, ServerAlias, ErrorLog and CustomLog as necessary. Then, create the symbolic links to the /etc/apache2/sites-enabled directory, while deleting the Apache default link. 1 2 sudo rm /etc/apache2/sites-enabled/000-default.conf sudo ln -s /etc/apache2/sites-available/chamilo.conf /etc/apache2/sites-enabled/ Finally, restart Apache so all the changes are activated. 1 sudo systemctl restart apache2.service Complete the install in the browser Open up your browser and navigate to your server, for example: http://chamilo.iamamazing.com, and click on Install Chamilo. From here on, fill out the details as requested, but here is a quick guide for you. Step 1 - Installation Language: Choose the language of choice and then click the Next button. Step 2 – Requirements: Make sure that all mandatory requirements have been met, and then click the New installation button. Step 3 – Licence: Read the licence if you dare, and the click the checkbox next to the I agree sentence, fill in all required fields, and then click the Next button. Step 4 – MySQL database settings: Input the database credentials we setup earlier and then click the Check database connection button to verify them. Click the Next button to move on. Step 5 – Config settings: Modify the pre-set administrator password, fill in the other fields accordingly, and then click the Next button. Step 6 – Last check before install: Review all of the settings and hit the Install Chamilo button to start the web installation. Step 7 – Installation process execution: When Chamilo is successfully installed, click the Go to your newly created portal. button to finish the web installation wizard. Post-Install Safety Measure: DO NOT SKIP THIS!!! In order to tighten security of the installation folders, we need to change their permissions: 1 2 sudo chmod -R 0555 /var/www/html/chamilo/app/config sudo rm -rf /var/www/html/chamilo/main/install Fail2Ban Sourced from: How to Secure Your Linux Server with fail2banHow to Secure Your Linux Server with fail2ban Firstly, install fail2ban. 1 sudo apt-get install fail2ban Configuring fail2ban fail2ban creates ‘jails’ in .conf files. This standard config is removed each time fail2ban upgrades, so we’ll make a customized file. So, lets make a copy of the default file and then edit our own version. 1 2 sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local sudo nano /etc/fail2ban/jail.local Scroll down to the [DEFAULT] and [sshd] sections, that come up from about line 90 onwards. It appears near the top too, but ignore that. Find the following lines and update as below. See the source link above for further details of each. [DEFAULT] section: 1 2 3 4 5 6 7 ignoreip = 127.0.0.1/8 ::1 bantime = 24h findtime = 5m maxretry = 3 [sshd] section: ADD these 2 lines to the end of the [sshd] section. 1 2 maxretry = 3 enable = true Enable fail2ban Enable the service and auto-start. sudo systemctl enable fail2ban sudo systemctl start fail2ban Check that fail2ban is working. 1 sudo systemctl status fail2ban.service Check fail2ban status. This should show the active jail. 1 sudo fail2ban-client status To show the exact status of the jail we activated. It will show any IPs that are banned. 1 sudo fail2ban-client status sshd Testing the jail: see source link above. Unbanning an IP After seeing the banned IP from above, use the command below, inserting the appropriate IP. 1 sudo fail2ban-client set sshd unbanip 192.168.4.25 Now it can try again. Let’s Encrypt Certificate This part is adapted from a Digital Ocean tutorial. Certbot setup SSL certs are a must have so let’s hook them up. Firstly, install the certbot. sudo apt install -y certbot python3-certbot-apache Confirm your ServerName and ServerAlias details in your chamilo.conf file as we will need these for the cert request. 1 sudo nano /etc/apache2/sites-available/chamilo.conf Let’s quickly recheck that our Apahce files are all good and then reload Apache incase we made changes. 1 2 sudo apache2ctl configtest sudo systemctl reload apache2 Allow HTTPS through the firewall Confirm the current status. 1 sudo ufw status If HTTP and HTTPS aren’t allowed through, please refer back to the UFW setup above. Obtain SSL Certificate 1 sudo certbot --apache A script will start to configure SSL. You will be asked to give an email, and you must in order to receive notices of expiring certs. When asked, agree to Let’s Encrypt’s TOS, by pressing A. Certbot will then ask you which domains you want to get certs for. This is where having accurate ServerName and ServerAlias details is important. When asked whether you want to redirect traffic, chose option 2 for YES. This will force all conenctions over HTTPS. 1 2 3 4 5 6 7 8 Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 1: No redirect - Make no further changes to the webserver configuration. 2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for new sites, or if you&#39;re confident your site works on HTTPS. You can undo this change by editing your web server&#39;s configuration. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Select the appropriate number [1-2] then [enter] (press &#39;c&#39; to cancel): 2 If you get the message below, you’re golden! 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Congratulations! You have successfully enabled https://your_domain and https://www.your_domain You should test your configuration at: https://www.ssllabs.com/ssltest/analyze.html?d=your_domain https://www.ssllabs.com/ssltest/analyze.html?d=www.your_domain - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - IMPORTANT NOTES: - Congratulations! Your certificate and chain have been saved at: /etc/letsencrypt/live/your_domain/fullchain.pem Your key file has been saved at: /etc/letsencrypt/live/your_domain/privkey.pem Your cert will expire on 2020-07-27. To obtain a new or tweaked version of this certificate in the future, simply run certbot again with the &quot;certonly&quot; option. To non-interactively renew *all* of your certificates, run &quot;certbot renew&quot; - Your account credentials have been saved in your Certbot configuration directory at /etc/letsencrypt. You should make a secure backup of this folder now. This configuration directory will also contain certificates and private keys obtained by Certbot so making regular backups of this folder is ideal. - If you like Certbot, please consider supporting our work by: Donating to ISRG / Let&#39;s Encrypt: https://letsencrypt.org/donate Donating to EFF: https://eff.org/donate-le You can confirm your SSL cert and it’s grade over at SSL Labs Server Test. Verify Certbot Auto-Renewal Our certbot package will automatically auto-renew our certificate. To check the status of this service, let’s use: 1 sudo systemctl status certbot.timer Your output should look like this. 1 2 3 4 5 6 7 8 Output ● certbot.timer - Run certbot twice daily Loaded: loaded (/lib/systemd/system/certbot.timer; enabled; vendor preset: enabled) Active: active (waiting) since Tue 2020-04-28 17:57:48 UTC; 17h ago Trigger: Wed 2020-04-29 23:50:31 UTC; 12h left Triggers: ● certbot.service Apr 28 17:57:48 fine-turtle systemd[1]: Started Run certbot twice daily. And if you want to test the renewal process, run this. 1 sudo certbot renew --dry-run Conclusion That’s it! All should be working now." />
<link rel="canonical" href="http://localhost:4000/posts/how-to-install-chamilo-on-ubuntu-server/" />
<meta property="og:url" content="http://localhost:4000/posts/how-to-install-chamilo-on-ubuntu-server/" />
<meta property="og:site_name" content="darryl gibbs" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-12-18T00:00:00-03:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="How to Install Chamilo on Ubuntu Server" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"darryl gibbs"},"dateModified":"2020-12-18T00:00:00-03:00","datePublished":"2020-12-18T00:00:00-03:00","description":"This is a tutorial I’ve written mostly for my own purposes that I have adapted from the orginal post from Vultr. Kudos to those guys. Prerequisites Fresh Ubuntu Server install on a VPS with sudo access. A domain pointed at the server. Install necessary (and extra) software First, update the system. 1 sudo apt upgrade -y &amp;&amp; sudo apt dist-upgrade -y &amp;&amp; sudo apt autoremove -y &amp;&amp; sudo apt clean -y &amp;&amp; sudo reboot Then, install software we will use for the server. 1 2 3 4 5 6 7 8 9 10 sudo apt install -y ufw \\ fail2ban \\ unzip \\ zip \\ git \\ tree \\ openssh-server \\ net-tools \\ curl \\ software-properties-common Update UFW firewall rules 1 2 3 4 sudo ufw allow in ssh &amp;&amp; \\ sudo ufw allow in http &amp;&amp; \\ sudo ufw allow in https &amp;&amp; \\ sudo ufw enable Install, setup and secure MariaDB To install the latest version of MariaDB directly, you will need to add the MariaDB repos. Confirm the latest version here, and update the version number and Ubuntu version as needed. 1 2 3 4 5 sudo apt install -y software-properties-common &amp;&amp; \\ sudo apt-key adv --recv-keys --keyserver hkp://keyserver.ubuntu.com:80 0xF1656F24C74CD1D8 &amp;&amp; \\ sudo add-apt-repository &#39;deb [arch=amd64,arm64,ppc64el] http://mirrors.accretive-networks.net/mariadb/repo/10.5/ubuntu focal main&#39; &amp;&amp; \\ sudo apt update &amp;&amp; \\ sudo apt install -y mariadb-server During the install, provide a strong password for MariaDB. If not requested, no sweat, we’ll secure it in the next block. Ok, now fire up MariaDB and also make it start up automatically with the system on reboot: 1 2 sudo systemctl start mariadb.service sudo systemctl enable mariadb.service Now, let’s secure MariaDB: 1 sudo /usr/bin/mysql_secure_installation A prompt will come up, answer as below, but remember to provide a strong root password now if not done so previously. 1 2 3 4 5 6 Enter current password for root (enter for none): strong-ass-MariaDB-root-password Change the root password? [Y/n]: n Remove anonymous users? [Y/n]: y Disallow root login remotely? [Y/n]: y Remove test database and access to it? [Y/n]: y Reload privilege tables now? [Y/n]: y Install Apache 1 sudo apt install -y apache2 Go to the server URL to confirm Apache is up and running. Remove the standard Apache welcome page. 1 sudo mv /var/www/html/index.html /var/www/html/index.html.old Backup the default .conf file and block Apache from exposing the web root directory: 1 2 sudo cp /etc/apache2/apache2.conf /etc/apache2/apache2.conf.bak sudo sed -i &quot;s/Options Indexes FollowSymLinks/Options FollowSymLinks/&quot; /etc/apache2/apache2.conf Enable the Apache rewrite module, start the service and auto-start 1 2 3 sudo a2enmod rewrite sudo systemctl start apache2.service sudo systemctl enable apache2.service Install latest PHP Packages In order to run the latest PHP 7.x packages, we need to add the repo: 1 2 3 4 sudo add-apt-repository -y ppa:ondrej/php sudo apt update sudo apt upgrade -y sudo apt autoremove -y Install the latest 7.4 packages. Before doing so, confirm the latest version here, and if higher the 7.4, substitute that version wherever you see 7.4. 1 sudo apt install -y php7.4 php7.4-opcache php7.4-cli php7.4-curl php7.4-common php7.4-gd php7.4-intl php7.4-mbstring php7.4-mysql libapache2-mod-php7.4 php7.4-soap php7.4-xml php7.4-xmlrpc php7.4-zip php7.4-ldap php-apcu-bc Backup and then edit the PHP config file pertaining to Apache: 1 2 sudo cp /etc/php/7.4/apache2/php.ini /etc/php/7.4/apache2/php.ini.bak sudo sed -i &#39;s#;date.timezone =#date.timezone = America/Sao_Paulo#&#39; /etc/php/7.4/apache2/php.ini Right, now let’s adjust the php.ini file to meet the necessities of Chamilo LMS: 1 sudo nano /etc/php/7.4/apache2/php.ini Find these: 1 2 3 session.cookie_httponly = upload_max_filesize = 2M post_max_size = 8M And update them to look like these: 1 2 3 session.cookie_httponly = 1 upload_max_filesize = 100M post_max_size = 100M Install Chamilo Setup the Database 1 2 3 4 5 6 7 sudo mysql -u root -p CREATE DATABASE chamilo; CREATE USER &#39;chamilo&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL PRIVILEGES ON chamilo.* TO &#39;chamilo&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39; WITH GRANT OPTION; FLUSH PRIVILEGES; EXIT; Make sure to update at least the password with your prefered choice, and the DB name and user should you wish to. Get Chamilo files Let’s now head to Chamilo’s GitHub page to confirm we have the latest version. Update the link and steps below as needed: 1 2 cd wget https://github.com/chamilo/chamilo-lms/releases/download/v1.11.14/chamilo-1.11.14.tar.gz Extract all the files to the /opt directory: 1 sudo tar -zxvf chamilo-1.11.14.tar.gz -C /opt Create a symbolic link between the unzip directory and the webserver root directory” 1 sudo ln -s /opt/chamilo-lms-1.11.14 /var/www/html/chamilo Modify the ownership of all Chamilo files to the www-data user and the www-data group: 1 sudo chown -R www-data:www-data /opt/chamilo-lms-1.11.14 Configure Apache virtual server for Chamilo 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 cat &lt;&lt;EOF | sudo tee /etc/apache2/sites-available/chamilo.conf &lt;VirtualHost *:80&gt; ServerAdmin admin@example.com DocumentRoot /var/www/html/chamilo ServerName chamilo.example.com ServerAlias example.com &lt;Directory /&gt; AllowOverride All Require all granted &lt;/Directory&gt; &lt;Directory /var/www/html/chamilo&gt; Options FollowSymLinks AllowOverride All Require all granted &lt;/Directory&gt; ErrorLog /var/log/apache2/chamilo.example.com-error_log CustomLog /var/log/apache2/chamilo.example.com-access_log common &lt;/VirtualHost&gt; EOF Update the ServerAdmin, ServerName, ServerAlias, ErrorLog and CustomLog as necessary. Then, create the symbolic links to the /etc/apache2/sites-enabled directory, while deleting the Apache default link. 1 2 sudo rm /etc/apache2/sites-enabled/000-default.conf sudo ln -s /etc/apache2/sites-available/chamilo.conf /etc/apache2/sites-enabled/ Finally, restart Apache so all the changes are activated. 1 sudo systemctl restart apache2.service Complete the install in the browser Open up your browser and navigate to your server, for example: http://chamilo.iamamazing.com, and click on Install Chamilo. From here on, fill out the details as requested, but here is a quick guide for you. Step 1 - Installation Language: Choose the language of choice and then click the Next button. Step 2 – Requirements: Make sure that all mandatory requirements have been met, and then click the New installation button. Step 3 – Licence: Read the licence if you dare, and the click the checkbox next to the I agree sentence, fill in all required fields, and then click the Next button. Step 4 – MySQL database settings: Input the database credentials we setup earlier and then click the Check database connection button to verify them. Click the Next button to move on. Step 5 – Config settings: Modify the pre-set administrator password, fill in the other fields accordingly, and then click the Next button. Step 6 – Last check before install: Review all of the settings and hit the Install Chamilo button to start the web installation. Step 7 – Installation process execution: When Chamilo is successfully installed, click the Go to your newly created portal. button to finish the web installation wizard. Post-Install Safety Measure: DO NOT SKIP THIS!!! In order to tighten security of the installation folders, we need to change their permissions: 1 2 sudo chmod -R 0555 /var/www/html/chamilo/app/config sudo rm -rf /var/www/html/chamilo/main/install Fail2Ban Sourced from: How to Secure Your Linux Server with fail2banHow to Secure Your Linux Server with fail2ban Firstly, install fail2ban. 1 sudo apt-get install fail2ban Configuring fail2ban fail2ban creates ‘jails’ in .conf files. This standard config is removed each time fail2ban upgrades, so we’ll make a customized file. So, lets make a copy of the default file and then edit our own version. 1 2 sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local sudo nano /etc/fail2ban/jail.local Scroll down to the [DEFAULT] and [sshd] sections, that come up from about line 90 onwards. It appears near the top too, but ignore that. Find the following lines and update as below. See the source link above for further details of each. [DEFAULT] section: 1 2 3 4 5 6 7 ignoreip = 127.0.0.1/8 ::1 bantime = 24h findtime = 5m maxretry = 3 [sshd] section: ADD these 2 lines to the end of the [sshd] section. 1 2 maxretry = 3 enable = true Enable fail2ban Enable the service and auto-start. sudo systemctl enable fail2ban sudo systemctl start fail2ban Check that fail2ban is working. 1 sudo systemctl status fail2ban.service Check fail2ban status. This should show the active jail. 1 sudo fail2ban-client status To show the exact status of the jail we activated. It will show any IPs that are banned. 1 sudo fail2ban-client status sshd Testing the jail: see source link above. Unbanning an IP After seeing the banned IP from above, use the command below, inserting the appropriate IP. 1 sudo fail2ban-client set sshd unbanip 192.168.4.25 Now it can try again. Let’s Encrypt Certificate This part is adapted from a Digital Ocean tutorial. Certbot setup SSL certs are a must have so let’s hook them up. Firstly, install the certbot. sudo apt install -y certbot python3-certbot-apache Confirm your ServerName and ServerAlias details in your chamilo.conf file as we will need these for the cert request. 1 sudo nano /etc/apache2/sites-available/chamilo.conf Let’s quickly recheck that our Apahce files are all good and then reload Apache incase we made changes. 1 2 sudo apache2ctl configtest sudo systemctl reload apache2 Allow HTTPS through the firewall Confirm the current status. 1 sudo ufw status If HTTP and HTTPS aren’t allowed through, please refer back to the UFW setup above. Obtain SSL Certificate 1 sudo certbot --apache A script will start to configure SSL. You will be asked to give an email, and you must in order to receive notices of expiring certs. When asked, agree to Let’s Encrypt’s TOS, by pressing A. Certbot will then ask you which domains you want to get certs for. This is where having accurate ServerName and ServerAlias details is important. When asked whether you want to redirect traffic, chose option 2 for YES. This will force all conenctions over HTTPS. 1 2 3 4 5 6 7 8 Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 1: No redirect - Make no further changes to the webserver configuration. 2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for new sites, or if you&#39;re confident your site works on HTTPS. You can undo this change by editing your web server&#39;s configuration. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Select the appropriate number [1-2] then [enter] (press &#39;c&#39; to cancel): 2 If you get the message below, you’re golden! 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Congratulations! You have successfully enabled https://your_domain and https://www.your_domain You should test your configuration at: https://www.ssllabs.com/ssltest/analyze.html?d=your_domain https://www.ssllabs.com/ssltest/analyze.html?d=www.your_domain - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - IMPORTANT NOTES: - Congratulations! Your certificate and chain have been saved at: /etc/letsencrypt/live/your_domain/fullchain.pem Your key file has been saved at: /etc/letsencrypt/live/your_domain/privkey.pem Your cert will expire on 2020-07-27. To obtain a new or tweaked version of this certificate in the future, simply run certbot again with the &quot;certonly&quot; option. To non-interactively renew *all* of your certificates, run &quot;certbot renew&quot; - Your account credentials have been saved in your Certbot configuration directory at /etc/letsencrypt. You should make a secure backup of this folder now. This configuration directory will also contain certificates and private keys obtained by Certbot so making regular backups of this folder is ideal. - If you like Certbot, please consider supporting our work by: Donating to ISRG / Let&#39;s Encrypt: https://letsencrypt.org/donate Donating to EFF: https://eff.org/donate-le You can confirm your SSL cert and it’s grade over at SSL Labs Server Test. Verify Certbot Auto-Renewal Our certbot package will automatically auto-renew our certificate. To check the status of this service, let’s use: 1 sudo systemctl status certbot.timer Your output should look like this. 1 2 3 4 5 6 7 8 Output ● certbot.timer - Run certbot twice daily Loaded: loaded (/lib/systemd/system/certbot.timer; enabled; vendor preset: enabled) Active: active (waiting) since Tue 2020-04-28 17:57:48 UTC; 17h ago Trigger: Wed 2020-04-29 23:50:31 UTC; 12h left Triggers: ● certbot.service Apr 28 17:57:48 fine-turtle systemd[1]: Started Run certbot twice daily. And if you want to test the renewal process, run this. 1 sudo certbot renew --dry-run Conclusion That’s it! All should be working now.","headline":"How to Install Chamilo on Ubuntu Server","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/how-to-install-chamilo-on-ubuntu-server/"},"url":"http://localhost:4000/posts/how-to-install-chamilo-on-ubuntu-server/"}</script>
<!-- End Jekyll SEO tag -->


  <title>How to Install Chamilo on Ubuntu Server | darryl gibbs
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="darryl gibbs">
<meta name="application-name" content="darryl gibbs">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- Scripts -->

  <script src="/assets/js/dist/theme.min.js"></script>

  <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script>







<script defer src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  



  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/commons/darryl-avatar-transparent.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <a class="site-title d-block" href="/">darryl gibbs</a>
    <p class="site-subtitle fst-italic mb-0">deciphering I.T. one post at a time</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/darrylgibbs"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['hello','dgibbs.me'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>How to Install Chamilo on Ubuntu Server</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->





<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  




<!-- return -->










<article class="px-1" data-toc="true">
  <header>
    <h1 data-toc-skip>How to Install Chamilo on Ubuntu Server</h1>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1608260400"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Dec 18, 2020
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              
                
                
              
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="2096 words"
>
  <em>11 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  
    <div id="toc-bar" class="d-flex align-items-center justify-content-between invisible">
      <span class="label text-truncate">How to Install Chamilo on Ubuntu Server</span>
      <button type="button" class="toc-trigger btn me-1">
        <i class="fa-solid fa-list-ul fa-fw"></i>
      </button>
    </div>

    <button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm">
      <span class="label ps-2 pe-1">Contents</span>
      <i class="fa-solid fa-angle-right fa-fw"></i>
    </button>

    <dialog id="toc-popup" class="p-0">
      <div class="header d-flex flex-row align-items-center justify-content-between">
        <div class="label text-truncate py-2 ms-4">How to Install Chamilo on Ubuntu Server</div>
        <button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75">
          <i class="fas fa-close"></i>
        </button>
      </div>
      <div id="toc-popup-content" class="px-4 py-3 pb-4"></div>
    </dialog>
  

  <div class="content">
    <p>This is a tutorial I’ve written mostly for my own purposes that I have adapted from the orginal post from <a href="https://www.vultr.com/docs/how-to-install-chamilo-1-11-8-on-ubuntu-18-04-lts">Vultr</a>. Kudos to those guys.</p>

<h2 id="prerequisites"><span class="me-2">Prerequisites</span><a href="#prerequisites" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<ul>
  <li>Fresh Ubuntu Server install on a VPS with sudo access.</li>
  <li>A domain pointed at the server.</li>
</ul>

<h2 id="install-necessary-and-extra-software"><span class="me-2">Install necessary (and extra) software</span><a href="#install-necessary-and-extra-software" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>First, update the system.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>apt upgrade <span class="nt">-y</span> <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt dist-upgrade <span class="nt">-y</span> <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt autoremove <span class="nt">-y</span> <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt clean <span class="nt">-y</span> <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>reboot
</pre></td></tr></tbody></table></code></div></div>

<p>Then, install software we will use for the server.</p>

<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> ufw <span class="se">\</span>
fail2ban <span class="se">\</span>
unzip <span class="se">\</span>
zip <span class="se">\</span>
git <span class="se">\</span>
tree <span class="se">\</span>
openssh-server <span class="se">\</span>
net-tools <span class="se">\</span>
curl <span class="se">\</span>
software-properties-common
</pre></td></tr></tbody></table></code></div></div>

<h2 id="update-ufw-firewall-rules"><span class="me-2">Update UFW firewall rules</span><a href="#update-ufw-firewall-rules" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>ufw allow <span class="k">in </span>ssh <span class="o">&amp;&amp;</span> <span class="se">\</span>
<span class="nb">sudo </span>ufw allow <span class="k">in </span>http <span class="o">&amp;&amp;</span> <span class="se">\</span>
<span class="nb">sudo </span>ufw allow <span class="k">in </span>https <span class="o">&amp;&amp;</span> <span class="se">\</span>
<span class="nb">sudo </span>ufw <span class="nb">enable</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="install-setup-and-secure-mariadb"><span class="me-2">Install, setup and secure MariaDB</span><a href="#install-setup-and-secure-mariadb" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>To install the latest version of MariaDB directly, you will need to add the MariaDB repos. Confirm the latest version <a href="https://mariadb.org/download/">here</a>, and update the version number and Ubuntu version as needed.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> software-properties-common <span class="o">&amp;&amp;</span> <span class="se">\</span>
<span class="nb">sudo </span>apt-key adv <span class="nt">--recv-keys</span> <span class="nt">--keyserver</span> hkp://keyserver.ubuntu.com:80 0xF1656F24C74CD1D8 <span class="o">&amp;&amp;</span> <span class="se">\</span>
<span class="nb">sudo </span>add-apt-repository <span class="s1">'deb [arch=amd64,arm64,ppc64el] http://mirrors.accretive-networks.net/mariadb/repo/10.5/ubuntu focal main'</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
<span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="se">\</span>
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> mariadb-server
</pre></td></tr></tbody></table></code></div></div>

<p>During the install, provide a strong password for MariaDB. If not requested, no sweat, we’ll secure it in the next block.</p>

<p>Ok, now fire up MariaDB and also make it start up automatically with the system on reboot:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl start mariadb.service
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>mariadb.service
</pre></td></tr></tbody></table></code></div></div>
<p>Now, let’s secure MariaDB:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo</span> /usr/bin/mysql_secure_installation
</pre></td></tr></tbody></table></code></div></div>
<p>A prompt will come up, answer as below, but remember to provide a <strong>strong</strong> root password now if not done so previously.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>Enter current password <span class="k">for </span>root <span class="o">(</span>enter <span class="k">for </span>none<span class="o">)</span>: strong-ass-MariaDB-root-password
Change the root password? <span class="o">[</span>Y/n]: n
Remove anonymous <span class="nb">users</span>? <span class="o">[</span>Y/n]: y
Disallow root login remotely? <span class="o">[</span>Y/n]: y
Remove <span class="nb">test </span>database and access to it? <span class="o">[</span>Y/n]: y
Reload privilege tables now? <span class="o">[</span>Y/n]: y
</pre></td></tr></tbody></table></code></div></div>

<h2 id="install-apache"><span class="me-2">Install Apache</span><a href="#install-apache" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> apache2
</pre></td></tr></tbody></table></code></div></div>
<p>Go to the server URL to confirm Apache is up and running.</p>

<p>Remove the standard Apache welcome page.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo mv</span> /var/www/html/index.html /var/www/html/index.html.old
</pre></td></tr></tbody></table></code></div></div>
<p>Backup the default .conf file and block Apache from exposing the web root directory:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo cp</span> /etc/apache2/apache2.conf /etc/apache2/apache2.conf.bak
<span class="nb">sudo sed</span> <span class="nt">-i</span> <span class="s2">"s/Options Indexes FollowSymLinks/Options FollowSymLinks/"</span> /etc/apache2/apache2.conf
</pre></td></tr></tbody></table></code></div></div>
<p>Enable the Apache rewrite module, start the service and auto-start</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>a2enmod rewrite
<span class="nb">sudo </span>systemctl start apache2.service
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>apache2.service
</pre></td></tr></tbody></table></code></div></div>

<h2 id="install-latest-php-packages"><span class="me-2">Install latest PHP Packages</span><a href="#install-latest-php-packages" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>In order to run the latest PHP 7.x packages, we need to add the repo:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>add-apt-repository <span class="nt">-y</span> ppa:ondrej/php
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt upgrade <span class="nt">-y</span>
<span class="nb">sudo </span>apt autoremove <span class="nt">-y</span>
</pre></td></tr></tbody></table></code></div></div>
<p>Install the latest 7.4 packages. Before doing so, confirm the latest version <a href="https://www.php.net/downloads.php">here</a>, and if higher the 7.4, substitute that version wherever you see 7.4.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> php7.4 php7.4-opcache php7.4-cli php7.4-curl php7.4-common php7.4-gd php7.4-intl php7.4-mbstring php7.4-mysql libapache2-mod-php7.4 php7.4-soap php7.4-xml php7.4-xmlrpc php7.4-zip php7.4-ldap php-apcu-bc
</pre></td></tr></tbody></table></code></div></div>
<p>Backup and then edit the PHP config file pertaining to Apache:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo cp</span> /etc/php/7.4/apache2/php.ini /etc/php/7.4/apache2/php.ini.bak
<span class="nb">sudo sed</span> <span class="nt">-i</span> <span class="s1">'s#;date.timezone =#date.timezone = America/Sao_Paulo#'</span> /etc/php/7.4/apache2/php.ini
</pre></td></tr></tbody></table></code></div></div>
<p>Right, now let’s adjust the php.ini file to meet the necessities of Chamilo LMS:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/php/7.4/apache2/php.ini
</pre></td></tr></tbody></table></code></div></div>
<p>Find these:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>session.cookie_httponly <span class="o">=</span>
upload_max_filesize <span class="o">=</span> 2M
post_max_size <span class="o">=</span> 8M
</pre></td></tr></tbody></table></code></div></div>
<p>And update them to look like these:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>session.cookie_httponly <span class="o">=</span> 1
upload_max_filesize <span class="o">=</span> 100M
post_max_size <span class="o">=</span> 100M
</pre></td></tr></tbody></table></code></div></div>
<h2 id="install-chamilo"><span class="me-2">Install Chamilo</span><a href="#install-chamilo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<h3 id="setup-the-database"><span class="me-2">Setup the Database</span><a href="#setup-the-database" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>mysql <span class="nt">-u</span> root <span class="nt">-p</span>

CREATE DATABASE chamilo<span class="p">;</span>
CREATE USER <span class="s1">'chamilo'</span>@<span class="s1">'localhost'</span> IDENTIFIED BY <span class="s1">'password'</span><span class="p">;</span>
GRANT ALL PRIVILEGES ON chamilo.<span class="k">*</span> TO <span class="s1">'chamilo'</span>@<span class="s1">'localhost'</span> IDENTIFIED BY <span class="s1">'password'</span> WITH GRANT OPTION<span class="p">;</span>
FLUSH PRIVILEGES<span class="p">;</span>
EXIT<span class="p">;</span>
</pre></td></tr></tbody></table></code></div></div>
<p>Make sure to update at least the <strong>password</strong> with your prefered choice, and the DB name and user should you wish to.
Get Chamilo files</p>

<p>Let’s now head to <a href="https://github.com/chamilo/chamilo-lms/releases">Chamilo’s GitHub page</a> to confirm we have the latest version. Update the link and steps below as needed:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">cd
</span>wget https://github.com/chamilo/chamilo-lms/releases/download/v1.11.14/chamilo-1.11.14.tar.gz
</pre></td></tr></tbody></table></code></div></div>
<p>Extract all the files to the /opt directory:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo tar</span> <span class="nt">-zxvf</span> chamilo-1.11.14.tar.gz <span class="nt">-C</span> /opt
</pre></td></tr></tbody></table></code></div></div>
<p>Create a symbolic link between the unzip directory and the webserver root directory”</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo ln</span> <span class="nt">-s</span> /opt/chamilo-lms-1.11.14 /var/www/html/chamilo
</pre></td></tr></tbody></table></code></div></div>
<p>Modify the ownership of all Chamilo files to the <code class="language-plaintext highlighter-rouge">www-data</code> user and the <code class="language-plaintext highlighter-rouge">www-data</code> group:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo chown</span> <span class="nt">-R</span> www-data:www-data /opt/chamilo-lms-1.11.14
</pre></td></tr></tbody></table></code></div></div>
<p>Configure Apache virtual server for Chamilo</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | sudo tee /etc/apache2/sites-available/chamilo.conf
&lt;VirtualHost *:80&gt;
ServerAdmin admin@example.com
DocumentRoot /var/www/html/chamilo
ServerName chamilo.example.com
ServerAlias example.com
&lt;Directory /&gt;
AllowOverride All
Require all granted
&lt;/Directory&gt;
&lt;Directory /var/www/html/chamilo&gt;
Options FollowSymLinks
AllowOverride All
Require all granted
&lt;/Directory&gt;
ErrorLog /var/log/apache2/chamilo.example.com-error_log
CustomLog /var/log/apache2/chamilo.example.com-access_log common
&lt;/VirtualHost&gt;
</span><span class="no">EOF
</span></pre></td></tr></tbody></table></code></div></div>
<p>Update the <strong>ServerAdmin</strong>, <strong>ServerName</strong>, <strong>ServerAlias</strong>, <strong>ErrorLog</strong> and <strong>CustomLog</strong> as necessary.</p>

<p>Then, create the symbolic links to the /etc/apache2/sites-enabled directory, while deleting the Apache default link.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo rm</span> /etc/apache2/sites-enabled/000-default.conf
<span class="nb">sudo ln</span> <span class="nt">-s</span> /etc/apache2/sites-available/chamilo.conf /etc/apache2/sites-enabled/
</pre></td></tr></tbody></table></code></div></div>
<p>Finally, restart Apache so all the changes are activated.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl restart apache2.service
</pre></td></tr></tbody></table></code></div></div>

<h2 id="complete-the-install-in-the-browser"><span class="me-2">Complete the install in the browser</span><a href="#complete-the-install-in-the-browser" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Open up your browser and navigate to your server, for example: http://chamilo.iamamazing.com, and click on Install Chamilo. From here on, fill out the details as requested, but here is a quick guide for you.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Step 1 - Installation Language</code>: Choose the language of choice and then click the <code class="language-plaintext highlighter-rouge">Next</code> button.</li>
  <li><code class="language-plaintext highlighter-rouge">Step 2 – Requirements</code>: Make sure that all mandatory requirements have been met, and then click the <code class="language-plaintext highlighter-rouge">New installation</code> button.</li>
  <li><code class="language-plaintext highlighter-rouge">Step 3 – Licence</code>: Read the licence if you dare, and the click the checkbox next to the <code class="language-plaintext highlighter-rouge">I agree</code> sentence, fill in all required fields, and then click the Next button.</li>
  <li><code class="language-plaintext highlighter-rouge">Step 4 – MySQL database settings</code>: Input the database credentials we setup earlier and then click the <code class="language-plaintext highlighter-rouge">Check database connection</code> button to verify them. Click the Next button to move on.</li>
  <li><code class="language-plaintext highlighter-rouge">Step 5 – Config settings</code>: Modify the pre-set administrator password, fill in the other fields accordingly, and then click the <code class="language-plaintext highlighter-rouge">Next</code> button.</li>
  <li><code class="language-plaintext highlighter-rouge">Step 6 – Last check before install</code>: Review all of the settings and hit the <code class="language-plaintext highlighter-rouge">Install Chamilo</code> button to start the web installation.</li>
  <li><code class="language-plaintext highlighter-rouge">Step 7 – Installation process execution</code>: When Chamilo is successfully installed, click the <code class="language-plaintext highlighter-rouge">Go to your newly created portal</code>. button to finish the web installation wizard.</li>
</ul>

<h3 id="post-install-safety-measure-do-not-skip-this"><span class="me-2">Post-Install Safety Measure: DO NOT SKIP THIS!!!</span><a href="#post-install-safety-measure-do-not-skip-this" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>In order to tighten security of the installation folders, we need to change their permissions:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo chmod</span> <span class="nt">-R</span> 0555 /var/www/html/chamilo/app/config
<span class="nb">sudo rm</span> <span class="nt">-rf</span> /var/www/html/chamilo/main/install
</pre></td></tr></tbody></table></code></div></div>

<h2 id="fail2ban"><span class="me-2">Fail2Ban</span><a href="#fail2ban" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Sourced from: <a href="https://www.howtogeek.com/675010/how-to-secure-your-linux-computer-with-fail2ban/">How to Secure Your Linux Server with fail2banHow to Secure Your Linux Server with fail2ban</a></p>

<p>Firstly, install fail2ban.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get <span class="nb">install </span>fail2ban
</pre></td></tr></tbody></table></code></div></div>
<h3 id="configuring-fail2ban"><span class="me-2">Configuring fail2ban</span><a href="#configuring-fail2ban" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>fail2ban creates ‘jails’ in .conf files. This standard config is removed each time fail2ban upgrades, so we’ll make a customized file.</p>

<p>So, lets make a copy of the default file and then edit our own version.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo cp</span> /etc/fail2ban/jail.conf /etc/fail2ban/jail.local
<span class="nb">sudo </span>nano /etc/fail2ban/jail.local
</pre></td></tr></tbody></table></code></div></div>
<p>Scroll down to the <strong>[DEFAULT]</strong> and <strong>[sshd]</strong> sections, that come up from about line 90 onwards. It appears near the top too, but ignore that. Find the following lines and update as below. See the source link above for further details of each.</p>

<p>[DEFAULT] section:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>ignoreip <span class="o">=</span> 127.0.0.1/8 ::1

bantime <span class="o">=</span> 24h

findtime <span class="o">=</span> 5m

maxretry <span class="o">=</span> 3
</pre></td></tr></tbody></table></code></div></div>
<p>[sshd] section: <strong>ADD</strong> these 2 lines to the end of the [sshd] section.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>maxretry <span class="o">=</span> 3
<span class="nb">enable</span> <span class="o">=</span> <span class="nb">true</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="enable-fail2ban"><span class="me-2">Enable fail2ban</span><a href="#enable-fail2ban" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Enable the service and auto-start.</p>

<p>sudo systemctl enable fail2ban
sudo systemctl start fail2ban</p>

<p>Check that fail2ban is working.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl status fail2ban.service
</pre></td></tr></tbody></table></code></div></div>
<p>Check fail2ban status. This should show the active jail.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>fail2ban-client status
</pre></td></tr></tbody></table></code></div></div>
<p>To show the exact status of the jail we activated. It will show any IPs that are banned.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>fail2ban-client status sshd
</pre></td></tr></tbody></table></code></div></div>
<p>Testing the jail: see source link above.</p>

<h3 id="unbanning-an-ip"><span class="me-2">Unbanning an IP</span><a href="#unbanning-an-ip" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>After seeing the banned IP from above, use the command below, inserting the appropriate IP.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>fail2ban-client <span class="nb">set </span>sshd unbanip 192.168.4.25
</pre></td></tr></tbody></table></code></div></div>
<p>Now it can try again.</p>

<h2 id="lets-encrypt-certificate"><span class="me-2">Let’s Encrypt Certificate</span><a href="#lets-encrypt-certificate" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>This part is adapted from a <a href="https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-20-04">Digital Ocean tutorial</a>.</p>
<h3 id="certbot-setup"><span class="me-2">Certbot setup</span><a href="#certbot-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>SSL certs are a <strong>must have</strong> so let’s hook them up.</p>

<p>Firstly, install the certbot.</p>

<p>sudo apt install -y certbot python3-certbot-apache</p>

<p>Confirm your <code class="language-plaintext highlighter-rouge">ServerName</code> and <code class="language-plaintext highlighter-rouge">ServerAlias</code> details in your <code class="language-plaintext highlighter-rouge">chamilo.conf</code> file as we will need these for the cert request.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/apache2/sites-available/chamilo.conf
</pre></td></tr></tbody></table></code></div></div>
<p>Let’s quickly recheck that our Apahce files are all good and then reload Apache incase we made changes.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>apache2ctl configtest
<span class="nb">sudo </span>systemctl reload apache2
</pre></td></tr></tbody></table></code></div></div>

<h3 id="allow-https-through-the-firewall"><span class="me-2">Allow HTTPS through the firewall</span><a href="#allow-https-through-the-firewall" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Confirm the current status.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>ufw status
</pre></td></tr></tbody></table></code></div></div>
<p>If HTTP and HTTPS aren’t allowed through, please refer back to the UFW setup above.
Obtain SSL Certificate</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>certbot <span class="nt">--apache</span>
</pre></td></tr></tbody></table></code></div></div>
<p>A script will start to configure SSL. You will be asked to give an email, and you must in order to receive notices of expiring certs.</p>

<p>When asked, agree to Let’s Encrypt’s TOS, by pressing A.</p>

<p>Certbot will then ask you which domains you want to get certs for. This is where having accurate ServerName and ServerAlias details is important.</p>

<p>When asked whether you want to redirect traffic, chose option 2 for YES. This will force all conenctions over HTTPS.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
1: No redirect - Make no further changes to the webserver configuration.
2: Redirect - Make all requests redirect to secure HTTPS access. Choose this <span class="k">for
</span>new sites, or <span class="k">if </span>you<span class="s1">'re confident your site works on HTTPS. You can undo this
change by editing your web server'</span>s configuration.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Select the appropriate number <span class="o">[</span>1-2] <span class="k">then</span> <span class="o">[</span>enter] <span class="o">(</span>press <span class="s1">'c'</span> to cancel<span class="o">)</span>: 2
</pre></td></tr></tbody></table></code></div></div>
<p>If you get the message below, you’re golden!</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Congratulations! You have successfully enabled https://your_domain and
https://www.your_domain

You should <span class="nb">test </span>your configuration at:
https://www.ssllabs.com/ssltest/analyze.html?d<span class="o">=</span>your_domain
https://www.ssllabs.com/ssltest/analyze.html?d<span class="o">=</span>www.your_domain
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at:
   /etc/letsencrypt/live/your_domain/fullchain.pem
   Your key file has been saved at:
   /etc/letsencrypt/live/your_domain/privkey.pem
   Your cert will expire on 2020-07-27. To obtain a new or tweaked
   version of this certificate <span class="k">in </span>the future, simply run certbot again
   with the <span class="s2">"certonly"</span> option. To non-interactively renew <span class="k">*</span>all<span class="k">*</span> of
   your certificates, run <span class="s2">"certbot renew"</span>
 - Your account credentials have been saved <span class="k">in </span>your Certbot
   configuration directory at /etc/letsencrypt. You should make a
   secure backup of this folder now. This configuration directory will
   also contain certificates and private keys obtained by Certbot so
   making regular backups of this folder is ideal.
 - If you like Certbot, please consider supporting our work by:

   Donating to ISRG / Let<span class="s1">'s Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le
</span></pre></td></tr></tbody></table></code></div></div>
<p>You can confirm your SSL cert and it’s grade over at <a href="https://www.ssllabs.com/ssltest/">SSL Labs Server Test</a>.</p>

<h3 id="verify-certbot-auto-renewal"><span class="me-2">Verify Certbot Auto-Renewal</span><a href="#verify-certbot-auto-renewal" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Our certbot package will automatically auto-renew our certificate. To check the status of this service, let’s use:</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl status certbot.timer
</pre></td></tr></tbody></table></code></div></div>
<p>Your output should look like this.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>Output
● certbot.timer - Run certbot twice daily
     Loaded: loaded <span class="o">(</span>/lib/systemd/system/certbot.timer<span class="p">;</span> enabled<span class="p">;</span> vendor preset: enabled<span class="o">)</span>
     Active: active <span class="o">(</span>waiting<span class="o">)</span> since Tue 2020-04-28 17:57:48 UTC<span class="p">;</span> 17h ago
    Trigger: Wed 2020-04-29 23:50:31 UTC<span class="p">;</span> 12h left
   Triggers: ● certbot.service

Apr 28 17:57:48 fine-turtle systemd[1]: Started Run certbot twice daily.
</pre></td></tr></tbody></table></code></div></div>
<p>And if you want to test the renewal process, run this.</p>
<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>certbot renew <span class="nt">--dry-run</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="conclusion"><span class="me-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>That’s it! All should be working now.</p>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/homelab/">homelab</a>,
          <a href="/categories/tutorial/">tutorial</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/chamilo/"
            class="post-tag no-text-decoration"
          >chamilo</a>
        
          <a
            href="/tags/selfhosted/"
            class="post-tag no-text-decoration"
          >selfhosted</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=How%20to%20Install%20Chamilo%20on%20Ubuntu%20Server%20-%20darryl%20gibbs&url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2Fhow-to-install-chamilo-on-ubuntu-server%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=How%20to%20Install%20Chamilo%20on%20Ubuntu%20Server%20-%20darryl%20gibbs&u=http%3A%2F%2Flocalhost%3A4000%2Fposts%2Fhow-to-install-chamilo-on-ubuntu-server%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2Fhow-to-install-chamilo-on-ubuntu-server%2F&text=How%20to%20Install%20Chamilo%20on%20Ubuntu%20Server%20-%20darryl%20gibbs" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/homelab-update-dec-2024/">Homelab Update Dec 2024</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/ansible-all-distro-docker-install/">Ansible All Distro Docker Install</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/how-to-install-invoice-ninja-5-in-docker-compose/">How to Install Invoice Ninja V5 in Docker Compose</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/how-to-install-invoice-ninja-5-on-ubuntu-server/">How to install Invoice Ninja on Ubuntu Server 20.04</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/how-to-install-chamilo-on-ubuntu-server/">How to Install Chamilo on Ubuntu Server</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/selfhosted/">selfhosted</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/invoice-ninja/">invoice ninja</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ansible/">ansible</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/chamilo/">chamilo</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/network/">network</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/playbooks/">playbooks</a>
      
    </div>
  </section>


            </div>

            
              
              






  <div class="toc-border-cover z-3"></div>
  <section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4">
    <h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/how-to-install-invoice-ninja-5-in-docker-compose/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1617775200"
  data-df="ll"
  
>
  Apr  7, 2021
</time>

              <h4 class="pt-0 my-2">How to Install Invoice Ninja V5 in Docker Compose</h4>
              <div class="text-muted">
                <p>Maybe you are like me and have a small business that requires an invoicing solution. You could pay the $10-15 to have a provider host the service for you (such as FreshBooks) or you could do it you...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/how-to-install-invoice-ninja-5-on-ubuntu-server/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1616997600"
  data-df="ll"
  
>
  Mar 29, 2021
</time>

              <h4 class="pt-0 my-2">How to install Invoice Ninja on Ubuntu Server 20.04</h4>
              <div class="text-muted">
                <p>This is a tutorial I’ve written mostly for my own purposes that I have adapted from the orginal post from TechnicallyComputers. Kudos to him!

Prerequisites


  
    Fresh Ubuntu Server install on ...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/ansible-all-distro-docker-install/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1733485849"
  data-df="ll"
  
>
  Dec  6, 2024
</time>

              <h4 class="pt-0 my-2">Ansible All Distro Docker Install</h4>
              <div class="text-muted">
                <p>As part of my SysAdmin journey, I’ve begun to play with Ansible.  For a while I’ve been using very simple playbooks to update my homelab’s VMs and LXC containers, but it’s time to take that a bit f...</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <div class="btn btn-outline-primary disabled" aria-label="Older">
      <p>-</p>
    </div>
  

  
    <a
      href="/posts/how-to-install-invoice-ninja-5-on-ubuntu-server/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>How to install Invoice Ninja on Ubuntu Server 20.04</p>
    </a>
  
</nav>

            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2024</time>

    
      <a href="https://github.com/darrylgibbs">Darryl Gibbs</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.2.2"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/selfhosted/">selfhosted</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/invoice-ninja/">invoice ninja</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ansible/">ansible</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/chamilo/">chamilo</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/network/">network</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/playbooks/">playbooks</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- Embedded scripts -->

    
      
      <!-- The comments switcher -->


    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  
  document.addEventListener('DOMContentLoaded', () => {
    SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('search-results'),
      json: '/assets/js/data/search.json',
      searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
      noResultsText: '<p class="mt-5">Oops! No results found.</p>',
      templateMiddleware: function(prop, value, template) {
        if (prop === 'categories') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
          }
        }

        if (prop === 'tags') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
          }
        }
      }
    });
  });
</script>

  </body>
</html>

